<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
	    	<meta name="viewport" content="width=device-width, initial-scale=1">
		<link href="static/css/bootstrap.min.css" rel="stylesheet">
		<script src="static/js/jquery.min.js"></script>
		<script src="static/js/bootstrap.min.js"></script>
		<title>Mask R-CNN 物件辨識</title>
	</head>
	<body>
		<header>
			<nav class="container navbar navbar-default" role="navigation">
				<div class="container-fluid">
					<div class="navbar-header">
						<a class="navbar-brand" href="/">Mask R-CNN物件辨識</a>
					</div>
					<ul class="nav navbar-nav navbar-right">
						<li><a href="/">返回</a></li>
					</ul>
				</div>
			</nav>
		</header>

		<div class="container">
			{% for img in imgs %}
			<div class="col-sm-4" style="margin-bottom:5px">
				<p>{{ img }}</p>
				<img data-enlargeable="" 
				     class="img-responsive img-thumbnail center-block" 
				     style="cursor:zoom-in;"
				     src="static/results/{{ img }}">
			</div>
			{% endfor %}
		</div>

		<script>
		$('img[data-enlargeable]').addClass('img-enlargeable').click(function() {
			var src = $(this).attr('src');
			var modal;

      			function removeModal() {
        			modal.remove();
        			$('body').off('keyup.modal-close');
      			}
			modal = $('<div>').css({
        			background: 'RGBA(0,0,0,.5) url(' + src + ') no-repeat center',
     		 		backgroundSize: 'contain',
   			 	width: '100%',
   			 	height: '100%',
   			 	position: 'fixed',
   			 	zIndex: '10000',
   			 	top: '0',
   			 	left: '0',
   			 	cursor: 'zoom-out'
 			 }).click(function() {
   			 	removeModal();
	 		 }).appendTo('body');
			
			//handling ESC
 			$('body').on('keyup.modal-close', function(e) {
   				if (e.key === 'Escape') {
    					removeModal();
   	 	 		}
 	  		});
		});
		</script>
	</body>
</html>
